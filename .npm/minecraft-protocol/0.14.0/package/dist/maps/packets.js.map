{"version":3,"sources":["packets.js"],"names":[],"mappings":"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","file":"packets.js","sourcesContent":["var assert = require(\"assert\");\n\nmodule.exports = {readPackets: readPackets};\n\nfunction readPackets(packets, states) {\n  var packetFields = {};\n  var packetNames = {};\n  var packetIds = {};\n  var packetStates = {toClient: {}, toServer: {}};\n  for(var stateName in states) {\n    var state = states[stateName];\n\n    packetFields[state] = {toClient: [], toServer: []};\n    packetNames[state] = {toClient: [], toServer: []};\n    packetIds[state] = {toClient: [], toServer: []};\n\n    ['toClient', 'toServer'].forEach(function(direction) {\n      for(var name in packets[state][direction]) {\n        var info = packets[state][direction][name];\n        var id = parseInt(info.id);\n        var fields = info.fields;\n\n        assert(id !== undefined, 'missing id for packet ' + name);\n        assert(fields !== undefined, 'missing fields for packet ' + name);\n        assert(!packetNames[state][direction].hasOwnProperty(id), 'duplicate packet id ' + id + ' for ' + name);\n        assert(!packetIds[state][direction].hasOwnProperty(name), 'duplicate packet name ' + name + ' for ' + id);\n        assert(!packetFields[state][direction].hasOwnProperty(id), 'duplicate packet id ' + id + ' for ' + name);\n        assert(!packetStates[direction].hasOwnProperty(name), 'duplicate packet name ' + name + ' for ' + id + ', must be unique across all states');\n\n        packetNames[state][direction][id] = name;\n        packetIds[state][direction][name] = id;\n        packetFields[state][direction][id] = fields;\n        packetStates[direction][name] = state;\n      }\n    });\n  }\n  return {\n    packetFields: packetFields,\n    packetNames: packetNames,\n    packetIds: packetIds,\n    packetStates: packetStates\n  };\n}\n"],"sourceRoot":"/source/"}